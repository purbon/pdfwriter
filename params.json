{"name":"PDFWriter","tagline":"A library to manage reports in PDF in a more clever and easy way.","body":"# PDFWriter\r\n\r\nThis is a library that simplify how to create PDF reports with [PDFBox](http://pdfbox.apache.org/), providing you with easy but powerful concepts that will help you automate this kind of PDF files.\r\n\r\n[![Build Status](https://travis-ci.org/purbon/pdfwriter.svg?branch=master)](https://travis-ci.org/purbon/pdfwriter)\r\n\r\n## Motivation\r\n\r\nStandard PDF reporting is a common task in many organizations and usually Java libraries that deal with PDF are really low level, without providing the user with an standardized way to \"just\" create a report, so here is where PDFWriter is laying. With an inspiration coming from [JFreeReport](http://reporting.pentaho.com/), I decided to finally use a powerful baseline library like [PDFBox](http://pdfbox.apache.org/) and create simple but powerful components that will make my live easy when dealing with reports.\r\n\r\n## Usage and Available components\r\n\r\nNowadays the list of available components is still not complete, but there are already a few of them. I will be adding them as soon as I need another ones, or whenever I can make new ones. Actually you can find in PDFWriter:\r\n\r\n* A basic title page.\r\n* A basic content page, acts as an index.\r\n* A basic table page, can include a chart with data coming from the table.\r\n\r\nBut you can also find another sub components, already interesting enoughs or useful to make a new ones.\r\n\r\n* Every page can have a header that will be displayed on top of it.\r\n* You can also include, or not a page number at the bottom of a basic page.\r\n* You can include charts, powered by [JFreeChart](http://www.jfree.org/jfreechart/). Actually [Bar](http://www.jfree.org/jfreechart/samples.html),  [Line](http://www.jfree.org/jfreechart/samples.html) and others like the custom PQ ones. In the feature we will add more, who knows.\r\n* Some times you want to paint an updated, or rearranged, version of your data, so in PDFWriter you can do that by implementing a Reducer that whenever appended to a chart will be responsible of adapting your data to the new format on line.\r\n\r\nAnd the last, but not the less important, you've an AbstractPDFWriter class that provide you with some basic functionality usefull to create the reports, obviously you can extend it, but also if you just use it it's still enoughts to have a nice pdf output.\r\n\r\n### Usage\r\n\r\nHere you've an example how to create a very basic PDF document with this lib, this file could be found under the examples package.\r\n\r\n```\r\npublic class PDFRecordWriter  extends AbstractPDFWriter {\r\n\r\n\tprivate String filename;\r\n\tprivate PageHeader header; \r\n\t\r\n\r\n\tpublic static final String PDF_TITLE = \"pdf.title\";\r\n\tpublic static final String PDF_TITLE_SUB = \"pdf.title.sub\";\r\n\tpublic static final String PDF_FILE_NAME = \"pdf.file.name\";\r\n\t\r\n\tpublic static final String PDF_JOB_ID = \"pdf.job.id\";\r\n\tpublic static final String PDF_JOB_NAME = \"pdf.job.name\";\r\n\tpublic static final String PDF_TIMESTAMP = \"pdf.creation.date\";\r\n \t \r\n\t\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tMap<String, String> options = new HashMap<String, String>();\r\n\t\toptions.put(PDF_TITLE, \"PDFWriter Example\");\r\n\t\toptions.put(PDF_TITLE_SUB, \"Example document\");\r\n\t\toptions.put(PDF_FILE_NAME, \"pdfwriter\");\r\n\t\tPDFRecordWriter writer = new PDFRecordWriter(\"example\", options);\r\n\t\tString key = \"ExampleKey\";\r\n\t\tRandom rand = new Random(System.currentTimeMillis());\r\n\t\tfor(int i=0; i < 5; i++) {\r\n\t\t\tStringBuilder sb = new StringBuilder();\r\n\t\t\tfor(int j=0; j < 4; j++) {\r\n\t\t\t\tif (j > 0)\r\n\t\t\t\t\tsb.append(\",\");\r\n\t\t\t\tsb.append(rand.nextDouble());\r\n\t\t\t}\r\n\t\t\twriter.write(key, sb.toString());\r\n\t\t}\r\n\t\twriter.close();\r\n\t}\r\n\t\r\n\tpublic PDFRecordWriter(String name, Map<String, String> options) {\r\n\t\tsuper();\r\n  \t\tfilename = options.get(PDF_FILE_NAME)+\"-\"+name+\".pdf\";\r\n \t\t\r\n\t\ttry {\r\n\t\t\tprepareReport(new FileOutputStream(filename), false);\r\n\t\t\t\r\n\t\t\tString title = options.get(PDF_TITLE);\r\n\t\t\tString sub   = options.get(PDF_TITLE_SUB);\r\n\t\t\toptions.remove(PDF_TITLE);\r\n\t\t\toptions.remove(PDF_TITLE_SUB);\r\n\t\t\toptions.remove(PDF_FILE_NAME);\r\n\t\t\t\r\n\t\t\taddTitlePage(title, sub , options);\r\n \t\t\tsetPageHeader(new PageHeader(\"Example table\"));\r\n \t\t\taddTable(true, true,  getHeadersDefinition());\r\n \t\t} catch (IOException e) {\r\n \t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t\r\n\tpublic String[] getHeadersDefinition() {\r\n\t\treturn new String[]{\"MIN\", \"AVG\", \"StdDev\", \"MAX\"};\r\n\t}\r\n\t\r\n\tpublic void write(String key, String value) throws IOException {\r\n \t\t\r\n\t\tStreamEvent sEvent = new StreamEvent();\r\n\r\n\t\tString[] sValues = value.split(\",\");\r\n  \t\tfor(String sValue : sValues) {\r\n  \t\t\tDouble dValue = Double.valueOf(sValue.replaceAll(\"[\\\\[|\\\\]]\", \"\"));\r\n  \t\t\t       dValue = Math.floor(dValue*1000000)/1000000.0;\r\n  \t\t\tsEvent.addElement(dValue.toString());\r\n  \t\t}\r\n  \t\trecordSubmited(sEvent);\t\r\n\t}\r\n\t\r\n\r\n\tpublic void close() throws IOException {\r\n\t\tflushTableLegend();\r\n\t\tflushAggTable();\r\n \t\tsuper.close();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void setPageHeader(PageHeader header) {\r\n\t\tthis.header = header;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic PageHeader getPageHeader() {\r\n \t\treturn header;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean hasToIncludeHeader() {\r\n\t\treturn header != null;\r\n\t}\r\n}\r\n```\r\n\r\n### Documentation\r\n\r\nA part from this simple README file you can take a look to our [javadoc](pdfwriter/site/apidocs/index.html), there you're going to find a description that might be usefull whenever you want to use this library in your code. I know this is not much of documentation, but I aim to include more as soon as I can.\r\n\r\n## Contributing\r\n\r\nIf you find a bug, want to extend or contribute some code, feel free to send a pull request or email me. All contributions are hihgly welcome.\r\n\r\n## License\r\n\r\nAll code int this lib is available under the [MIT](LICENSE) License, PDFBox is under the [Apache License v2.0](http://www.apache.org/licenses/LICENSE-2.0).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}